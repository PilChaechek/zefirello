# План рефакторинга компонентов для отображения задачи

## Проблема

Изначально компонент `TaskDetails.vue` использовался в двух местах: на отдельной странице (`TaskDetailView.vue`) и в боковой панели (`TaskDetailSheet.vue`). Различия в отображении (например, количество колонок в сетке вложений) решались с помощью пропа `isFullScreen`.

С появлением нового требования — добавления комментариев, которые должны отображаться **справа** на полной странице и **снизу** в боковой панели, — подход с одним пропом становится неэффективным. Пытаться реализовать две совершенно разные структуры макета внутри одного компонента с помощью `v-if` приведет к созданию запутанного и трудно поддерживаемого кода.

## Подход: Композиция компонентов

Вместо одного монолитного компонента мы разделим `TaskDetails.vue` на несколько мелких, сфокусированных и переиспользуемых компонентов ("кирпичиков"). Затем мы будем собирать ("композировать") из них нужные макеты в родительских компонентах (`TaskDetailView.vue` и `TaskDetailSheet.vue`).

## План действий

### 1. Декомпозиция `TaskDetails.vue`

Разбить текущий `TaskDetails.vue` на следующие независимые компоненты:

*   **`TaskMetadata.vue`**: Будет отвечать за отображение метаданных задачи:
    *   Статус
    *   Приоритет
    *   Затраченное время
    *   ID задачи

*   **`TaskDescription.vue`**: Будет отвечать за отображение описания задачи.

*   **`TaskAttachments.vue`**: Будет отвечать за отображение секции с вложениями.
    *   Этот компонент может принимать проп (`gridVariant: 'compact' | 'full'`), чтобы контролировать плотность сетки изображений.

### 2. Сборка представлений (Layouts)

Модифицировать родительские компоненты-контейнеры, чтобы они использовали новые "кирпичики" для построения своих макетов.

*   **`TaskDetailView.vue` (Страница задачи):**
    *   Создаст двухколоночный макет.
    *   В левую колонку поместит компоненты `TaskMetadata`, `TaskDescription` и `TaskAttachments`.
    *   Правая колонка будет зарезервирована для будущего компонента `TaskComments.vue`.

*   **`TaskDetailSheet.vue` (Боковая панель):**
    *   Сохранит одноколоночный макет.
    *   Расположит компоненты `TaskMetadata`, `TaskDescription` и `TaskAttachments` последовательно, друг под другом.
    *   Будущий компонент `TaskComments.vue` будет добавлен в самый низ.

## Преимущества этого подхода

1.  **Гибкость**: Легко изменять макеты для разных представлений, просто переставляя компоненты-кирпичики.
2.  **Отсутствие дублирования (DRY)**: Логика отображения каждой части (например, статуса) инкапсулирована в одном месте.
3.  **Читаемость и поддержка**: Маленькие, сфокусированные компоненты гораздо проще понимать и изменять.
4.  **Масштабируемость**: Добавление новых блоков (как комментарии) не ломает существующую логику, а просто добавляет новый "кирпичик" в нужный макет.
